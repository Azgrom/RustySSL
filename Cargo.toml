[package]
name = "rs_ssl"
version = "0.1.0"
edition = "2021"
license = "GPL-2.0-only"

[workspace]
members = [
    "wks/hash_ctx",
    "wks/n_bit_words",
    "wks/internal_state",
    "wks/internal_hasher_processor",
    "wks/hash_functions/*"
]

[workspace.package]
edition = "2021"
license = "GPL-2.0-only"
readme = "README.md"

[[bin]]
name = "main"
path = "src/bin/mod.rs"

[profile.release]
opt-level = 3
lto = true
codegen-units = 1

[profile.bench]
inherits = "release"

[profile.ci]
inherits = "release"
strip = false
debug = false

[dependencies]
rs_sha1 = { path = "wks/hash_functions/rs_sha1" }
rs_sha224 = { path = "wks/hash_functions/rs_sha224" }
rs_sha256 = { path = "wks/hash_functions/rs_sha256" }
rs_sha384 = { path = "wks/hash_functions/rs_sha384" }
hash_ctx = { path = "wks/hash_ctx" }

criterion = { version = "0.4.0", optional = true }
criterion-table = { version = "0.4.2", optional = true }
openssl = { version = "0.10.45", optional = true }
hashes_sha1 = { version = "0.10.5", package = "sha1", optional = true }
sha1_smol = { version = "1.0.0", optional = true }
const-sha1 = { version = "0.2.0", optional = true }

[features]
criterion = ["dep:criterion"]
comparator_build = ["dep:criterion",
    "dep:criterion-table",
    "dep:openssl",
    "dep:hashes_sha1",
    "dep:sha1_smol",
    "dep:const-sha1"]

[[bench]]
name = "benches"
harness = false
